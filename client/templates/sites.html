<template name="tmpltePageSites">
  {{> tmplteNavigationSites }}
  <div class="container containerSites" id="idContainerSites">
    {{> tmplteSites }}
    <div class="bandeauDuBas"></div>
    <div class="siteCache" id="idSiteCache"></div>
  </div>
</template>

<template name="tmplteSites">
  <div class="accueil starter-template" id="idSites">
    <p class="intro introInfos text-center text-md-left majuscule" id="idLesSites">Les sites</p>
    <div class="leConteneur">
      {{#if currentUser}}
        {{#if $in currentUser.profile "user" "userApp"}}
          <div id="login-buttons" class="login-buttons-dropdown-align-">  
            <div class='login-link-and-dropdown-list'>
              <a class='login-link-text' id='login-name-link'>
                {{#each email in currentUser.emails}}
                  {{ email.address }} ▾
                {{/each}}
              </a>
            </div>
          </div>
          <form class="form-horizontal col-lg-6" id="idChoixEspace">
            <div class="form-group">
              <label for="idSelectEspace" class="col-lg-12 control-label">Choisir l'espace : </label>
              <div class="col-lg-12">
                <select name="selectEspace" class="js-choix-espace form-control" id="idSelectEspace">
                  {{#each lEspaces}}
                    <option value="{{espaceNom}}">{{espaceNom}}</option>
                  {{/each}}
                </select>
              </div>
            </div>
          </form>
          <div class="panelChoixSite">
            {{#each lSites}}
              <a href="/authentification/sites/{{ _id }}" class="js-siteQuartier">
                <div class="panel panel-default">
                  <div class="panel-body" id="{{ _id }}">
                    <span class="glyphicon glyphicon-chevron-right pull-right" id="{{ _id }}"></span>
                    {{ siteQuartier }}
                  </div>
                </div>
              </a>
            {{/each}}
          </div>
        {{ else }}
          <div id="login-buttons" class="login-buttons-dropdown-align-">
            <div class="login-link-and-dropdown-list login-form-sign-in">
              <a class="login-link-text" id="login-sign-in-link">Sign in ▾</a>
            </div>
          </div>
          <div class="seConnecter"><span>Se</span> connecter</div>
          <div id='idErrLogin' class='error errLogin'>Vous n'êtes pas autorisé.e.s</div>
        {{ /if }}
      {{ else }}
        <div id="login-buttons" class="login-buttons-dropdown-align-">
          <div class="login-link-and-dropdown-list login-form-sign-in">
            <a class="login-link-text" id="login-sign-in-link">Sign in ▾</a>
          </div>
        </div>
        <div class="seConnecter"><span>Se</span> connecter</div>
      {{ /if }} 
    </div>         
  </div>  
</template>

<template name="tmplteModalLesSites">
  <div class="modal fade" tabindex="-1" role="dialog" id="idModalLesSites">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <h4>FERMER</h4>
          </button>
        </div>
        <div class="modal-body bckGris">
          <div class="choixLesSites" id="idChoixLesSites">
            <div class="form-group">
              <button type="submit" class="btn btn-danger majuscule" id="idSitesMalNotes">Sites mal notés</button>
            </div>
            <div class="form-group">
              <button type="submit" class="btn btn-default majuscule" id="idExpirationsPromos">Promos en expiration</button>
            </div>
            <div class="form-group">
              <button type="submit" class="btn btn-secondary majuscule" id="idSitesSSPromo">Sites sans promotion</button>
            </div>
          </div>

          <div class="lesSitesMN non" id="idLesSitesMN">
            <div class="form-group">
              <p class="bold">LES SITES MAL NOTES :</p>
            </div>
            {{#each lSiteMN}}
              <a href="/authentification/sites/{{ _id }}" class="js-lesSiteS">
                <div class="panel panel-default lesSiteS" id="{{ _id }}">
                  <div class="panel-body">
                    <span class="glyphicon glyphicon-chevron-right pull-right" id="{{ _id }}"></span>
                      {{ siteEspace }} - {{ siteQuartier }}
                  </div>
                </div>
              </a>
            {{/each}}
          </div>

          <div class="lesPromosExpi non" id="idLesPromosExpi">
            <div class="form-group">
              <p class="bold">LES PROMOS EN EXPIRATION :</p>
            </div>
            {{#each lPromosExpi}}
              <a href="/authentification/sites/{{ idSitePromo }}" class="js-lesSiteS">
                <div class="panel panel-default lesSiteS" id="{{ idSitePromo }}">
                  <div class="panel-body">
                    <span class="glyphicon glyphicon-chevron-right pull-right" id="{{ idSitePromo }}"></span>
                      {{ idPromotion }}
                  </div>
                </div>
              </a>
            {{/each}}
          </div>

          <div class="lesSitesSsPromo non" id="idLesSitesSsPromo">
            <div class="form-group">
              <p class="bold">LES SITES SANS PROMOTION :</p>
            </div>
            {{#each lSitesSsPromo}}
              <a href="/authentification/sites/{{ _id }}" class="js-lesSiteS">
                <div class="panel panel-default lesSiteS" id="{{ _id }}">
                  <div class="panel-body">
                    <span class="glyphicon glyphicon-chevron-right pull-right" id="{{ _id }}"></span>
                      {{ siteEspace }} - {{ siteQuartier }} - {{ siteDateSuppPromo }}
                  </div>
                </div>
              </a>
            {{/each}}
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="tmplteNavigationSites">
  <nav id="navigationAuthSites" class="navbar navbar-inverse navbar-fixed-top navigation">
    <div id="idNavigationSites" class="container authentification">
      <div class="navbar-header">
        {{#if currentUser}}
          {{#if $eq currentUser.profile "userApp"}}
          <button type="button" class="navbar-toggle collapsed btnCreation" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          {{/if}}
        {{ /if }}
        <a class="navbar-brand" href="/">
          <span class="pacifico fairRed">Derniermarché</span><span class="pacifico bleuFonce">.com</span>
        </a>
      </div>
      {{#if currentUser}}
        {{#if $eq currentUser.profile "userApp"}}
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a class="text-center bold" href="/authentification/espaces">Espaces disponibles</a></li>
            <li><a class="text-center bold active" href="#">Sites disponibles</a></li>
            <li><a class="text-center bold" href="/authentification/creationespace">Création d'un espace</a></li>
            <li><a class="text-center bold" href="/authentification/creationsite">Création d'un site</a></li>
            <li><a class="text-center bold" href="/authentification/utilisateurs">Les utilisateurs</a></li>
          </ul>
        </div>
        {{/if}}
      {{ /if }}
    </div>
  </nav>
</template>